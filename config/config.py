from dataclasses import dataclass
from typing import List


@dataclass
class BGVDefaults:
    # Default values
    N: int = 16
    LAMBDA_SECURITY: int = 128
    PLAINTEXT_MODULUS: int = 7
    BASE: int = 5
    
    LAMBDA_OPTIONS: List[str] = None
    
    def __post_init__(self):
        if self.LAMBDA_OPTIONS is None:
            self.LAMBDA_OPTIONS = ["80", "128", "192", "256"]


@dataclass
class AppSettings:
    # App settings
    
    # Window
    WINDOW_WIDTH: int = 1400
    WINDOW_HEIGHT: int = 1000
    MIN_WIDTH: int = 1400
    MIN_HEIGHT: int = 800
    
    APP_TITLE: str = "BGVision - Ð¿Ñ€Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ° Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð½Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð³Ñ€Ð°Ñ„ÑÐºÐ°Ñ‚Ð° ÑÑ…ÐµÐ¼Ð° BGV"
    APP_SUBTITLE: str = "Ð¡Ð¾Ñ„Ñ‚ÑƒÐµÑ€ Ð·Ð° Ñ…Ð¾Ð¼Ð¾Ð¼Ð¾Ñ€Ñ„Ð½Ð¾ ÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð½Ðµ Ñ Ð¿Ð¾Ð´Ð´Ñ€ÑŠÐ¶ÐºÐ° Ð½Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð½Ð¸ Ð¸Ð·Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ Ð²ÑŠÑ€Ñ…Ñƒ ÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð½Ð¸ Ð´Ð°Ð½Ð½Ð¸."
    
    MAX_CRYPTOGRAMS: int = 26
    MAX_PARAMETER_ATTEMPTS: int = 100


@dataclass
class UITexts:
    # UI Text information
    
    # Tabs
    CONFIG_TAB_TITLE: str = "âš™ï¸ ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ"
    OPERATIONS_TAB_TITLE: str = "ðŸ§® Ð¥Ð¾Ð¼Ð¾Ð¼Ð¾Ñ€Ñ„Ð½Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸"
    
    # Sections
    SECTION_BGV_PARAMS: str = "ðŸ“Š ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸ Ð½Ð° BGV ÑÑ…ÐµÐ¼Ð°Ñ‚Ð°"
    SECTION_PARAM_INFO: str = "â„¹ï¸ Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð·Ð° Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸Ñ‚Ðµ"
    SECTION_CREATE_CRYPTO: str = "ðŸ”’ Ð¡ÑŠÐ·Ð´Ð°Ð²Ð°Ð½Ðµ Ð½Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð³Ñ€Ð°Ð¼Ð¸"
    SECTION_EXISTING_CRYPTO: str = "ðŸ” Ð¡ÑŠÑ‰ÐµÑÑ‚Ð²ÑƒÐ²Ð°Ñ‰Ð¸ ÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð³Ñ€Ð°Ð¼Ð¸"
    SECTION_OPERATIONS: str = "âš¡ Ð¥Ð¾Ð¼Ð¾Ð¼Ð¾Ñ€Ñ„Ð½Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸"
    SECTION_OPERATION_SETTINGS: str = "ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð½Ð° Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸ÑÑ‚Ð°"
    SECTION_OPERATION_HISTORY: str = "Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð½Ð° Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸Ñ‚Ðµ"
    SECTION_RESULTS: str = "ðŸ“Š Ð ÐµÐ·ÑƒÐ»Ñ‚Ð°Ñ‚Ð¸ Ð¸ Ð´ÐµÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð½Ðµ"
    
    # Params
    PARAM_N: str = "Ð¡Ñ‚ÐµÐ¿ÐµÐ½ Ð½Ð° Ð¿Ð¾Ð»Ð¸Ð½Ð¾Ð¼Ð° (n):"
    PARAM_LAMBDA: str = "ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚ÑŠÑ€ Ð·Ð° ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚ (Î»):"
    PARAM_T: str = "ÐœÐ¾Ð´ÑƒÐ» Ð½Ð° ÑÐ²Ð½Ð¾Ñ‚Ð¾ ÑÑŠÐ¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ (t):"
    PARAM_BASE: str = "Ð‘Ð°Ð·Ð° Ð·Ð° Ñ€ÐµÐ»Ð¸Ð½ÐµÐ°Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ:"
    PARAM_Q: str = "ÐœÐ¾Ð´ÑƒÐ» Ð½Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð½Ð¸Ñ‚Ðµ ÑÑŠÐ¾Ð±Ñ‰ÐµÐ½Ð¸Ñ (q):"
    PARAM_Q_AUTO: str = "ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡Ð½Ð¾ Ð¾Ñ‚ Î»"
    
    # Operations
    OP_LEFT_OPERAND: str = "Ð›ÑÐ²Ð° ÑÑ‚Ñ€Ð°Ð½Ð°:"
    OP_RIGHT_OPERAND: str = "Ð”ÑÑÐ½Ð° ÑÑ‚Ñ€Ð°Ð½Ð°:"
    OP_OPERATION: str = "ÐžÐ¿ÐµÑ€Ð°Ñ†Ð¸Ñ:"
    OP_ADD: str = "+ Ð¡ÑŠÐ±Ð¸Ñ€Ð°Ð½Ðµ"
    OP_MULTIPLY: str = "Ã— Ð£Ð¼Ð½Ð¾Ð¶ÐµÐ½Ð¸Ðµ"
    
    CURR_CRYPTOGRAM: str = "Ð¢ÐµÐºÑƒÑ‰Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð³Ñ€Ð°Ð¼Ð°:"
    VALUES_INPUT: str = "Ð¡Ñ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸ (Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸ ÑÑŠÑ Ð·Ð°Ð¿ÐµÑ‚Ð°Ñ):"
    
    # Buttons
    BTN_GENERATE_KEYS: str = "Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€Ð°Ð¹ ÐºÐ»ÑŽÑ‡Ð¾Ð²Ðµ"
    BTN_RESET_DEFAULTS: str = "Ð’ÑŠÐ·ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸"
    BTN_ENCRYPT: str = "ÐšÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð¹"
    BTN_RANDOM: str = "Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€Ð°Ð¹ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸"
    BTN_REFRESH: str = "ÐžÐ±Ð½Ð¾Ð²Ð¸"
    BTN_VIEW: str = "ÐŸÑ€ÐµÐ³Ð»ÐµÐ´"
    BTN_CLEAR_ALL: str = "Ð˜Ð·Ñ‡Ð¸ÑÑ‚Ð¸ Ð²ÑÐ¸Ñ‡ÐºÐ¸"
    BTN_DECRYPT: str = "Ð”ÐµÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð¹"
    BTN_CALCULATE: str = "ÐŸÑ€ÐµÑÐ¼ÐµÑ‚Ð½Ð¸"
    BTN_CLEAR_HISTORY: str = "Ð˜Ð·Ñ‡Ð¸ÑÑ‚Ð¸ Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÑÑ‚Ð°"
    
    # Status
    STATUS_NO_KEYS: str = "ÐšÐ»ÑŽÑ‡Ð¾Ð²Ðµ: ÐÐµ ÑÐ° Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð°Ð½Ð¸."
    STATUS_KEYS_SUCCESS: str = "ÐšÐ»ÑŽÑ‡Ð¾Ð²Ðµ: Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€Ð°Ð½Ð¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾!"
    STATUS_INVALID_PARAMS: str = "ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸."
    STATUS_COMPATIBILITY_ERROR: str = "Ð“Ñ€ÐµÑˆÐºÐ° Ð¿Ñ€Ð¸ ÑÑŠÐ²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚!"
    STATUS_GENERATION_ERROR: str = "Ð“Ñ€ÐµÑˆÐºÐ° Ð¿Ñ€Ð¸ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð°Ð½Ðµ!"


@dataclass
class ValidationRules:
    # Validation rules
    
    # Polynomial degree
    N_MIN: int = 4
    N_MAX: int = 128
    
    # Security parameter
    LAMBDA_MIN: int = 80
    LAMBDA_MAX: int = 512
    
    # Plaintext modulus
    T_MIN: int = 2
    T_MAX: int = 100
    
    # Base
    BASE_MIN: int = 2
    BASE_MAX: int = 10
    
    # Coefficient modulus bits
    COEF_BITS_MIN: int = 32
    COEF_BITS_MAX: int = 512
    COEF_BITS_BUFFER: int = 32


@dataclass
class NoiseManagement:
    #Noise management
    
    # Modulus switching limits
    SWITCHING_THRESHOLD: int = 40
    CRITICAL_THRESHOLD_OFFSET: int = 40
    WARNING_THRESHOLD_OFFSET: int = 45
    
    SWITCHING_THRESHOLD_PERCENT: float = 40.0
    CRITICAL_THRESHOLD_PERCENT: float = 60.0
    
    # Maximal attempts
    MAX_SWITCHING_ATTEMPTS: int = 50
    MAX_MODULUS_ATTEMPTS: int = 100


class ParameterDescriptions:
    # Parameter descriptions
    
    N_DESCRIPTION = """Ð¡Ñ‚ÐµÐ¿ÐµÐ½ Ð½Ð° Ð¿Ð¾Ð»Ð¸Ð½Ð¾Ð¼Ð° (n):

â€¢ ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»Ñ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð° Ð½Ð° Ð²ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð·Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð½Ðµ.
â€¢ Ð¢Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ðµ ÑÑ‚ÐµÐ¿ÐµÐ½ Ð½Ð° Ð´Ð²Ð¾Ð¹ÐºÐ°Ñ‚Ð° (4, 8, 16, 32, 64, 128).
â€¢ ÐŸÐ¾-Ð³Ð¾Ð»ÑÐ¼Ð° ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚ = Ð¿Ð¾Ð²ÐµÑ‡Ðµ ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚, Ð½Ð¾ Ð¿Ð¾-Ð±Ð°Ð²Ð½Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸.
â€¢ ÐŸÑ€ÐµÐ¿Ð¾Ñ€ÑŠÑ‡Ð¸Ñ‚ÐµÐ»Ð½Ð¾: 16-32 Ð·Ð° Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚Ð° Ð½Ð° ÑÑ…ÐµÐ¼Ð°Ñ‚Ð°, 64-128 Ð·Ð° Ð¿Ð¾-ÑÐ»Ð¾Ð¶Ð½Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸.
â€¢ ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»Ð½Ð° ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚: 128."""

    LAMBDA_DESCRIPTION = """ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚ÑŠÑ€ Ð·Ð° ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚ (Î»):

â€¢ ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»Ñ Ð½Ð¸Ð²Ð¾Ñ‚Ð¾ Ð½Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð³Ñ€Ð°Ñ„ÑÐºÐ° ÑƒÑÑ‚Ð¾Ð¹Ñ‡Ð¸Ð²Ð¾ÑÑ‚.
â€¢ Î» = 80 Ð±Ð¸Ñ‚Ð° - Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»Ð½Ð° ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚.
â€¢ Î» = 128 Ð±Ð¸Ñ‚Ð° - ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð° ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚ (Ð¿Ñ€ÐµÐ¿Ð¾Ñ€ÑŠÑ‡Ð¸Ñ‚ÐµÐ»Ð½Ð¾).
â€¢ Î» = 192/256 Ð±Ð¸Ñ‚Ð° - Ð²Ð¸ÑÐ¾ÐºÐ° ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚.
â€¢ ÐŸÐ¾-Ð²Ð¸ÑÐ¾ÐºÐ¾ Î» = Ð¿Ð¾-Ð³Ð¾Ð»ÐµÐ¼Ð¸ Ð¼Ð¾Ð´ÑƒÐ»Ð¸ = Ð¿Ð¾-Ð±Ð°Ð²Ð½Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸."""

    T_DESCRIPTION = """ÐœÐ¾Ð´ÑƒÐ» Ð½Ð° ÑÐ²Ð½Ð¾Ñ‚Ð¾ ÑÑŠÐ¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ (t):

â€¢ ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»Ñ Ð¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÑÑ‚Ð²Ð¾Ñ‚Ð¾ Ð½Ð° Ð½ÐµÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð½Ð¸Ñ‚Ðµ ÑÑŠÐ¾Ð±Ñ‰ÐµÐ½Ð¸Ñ.
â€¢ Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð½Ð° ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸Ñ‚Ðµ Ð²ÑŠÐ² Ð²ÐµÐºÑ‚Ð¾Ñ€Ð° Ð·Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð½Ðµ: Ð¾Ñ‚ 0 Ð´Ð¾ t-1.
â€¢ t Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ñ‡Ð¸ÑÐ»Ð¾ (2, 3, 5, 7, 11, 13...).
â€¢ ÐœÐ°Ð»ÐºÐ¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸ (2-31) ÑÐ° Ð´Ð¾Ð±Ñ€Ð¸ Ð·Ð° Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚Ð° Ð½Ð° ÑÑ…ÐµÐ¼Ð°Ñ‚Ð°.
â€¢ ÐŸÐ¾-Ð³Ð¾Ð»ÐµÐ¼Ð¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐ²Ð°Ñ‚ ÑÑŠÑ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÑ‚Ð¾ Ð½Ð° Ð¿Ð¾Ð²ÐµÑ‡Ðµ Ð´Ð°Ð½Ð½Ð¸."""

    BASE_DESCRIPTION = """Ð‘Ð°Ð·Ð° Ð·Ð° Ñ€ÐµÐ»Ð¸Ð½ÐµÐ°Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ:

â€¢ Ð˜Ð·Ð¿Ð¾Ð»Ð·Ð²Ð° ÑÐµ Ð·Ð° Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð½Ð° ÑƒÐ¼Ð½Ð¾Ð¶ÐµÐ½Ð¸ÐµÑ‚Ð¾.
â€¢ ÐŸÑ€ÐµÐ¿Ð¾Ñ€ÑŠÑ‡Ð¸Ñ‚ÐµÐ»Ð½Ð¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸: 3-10.
â€¢ ÐŸÐ¾-Ð¼Ð°Ð»ÐºÐ° Ð±Ð°Ð·Ð° = Ð¿Ð¾-Ð±Ð°Ð²Ð½Ð° Ñ€ÐµÐ»Ð¸Ð½ÐµÑ€Ð¸Ð·Ð°Ñ†Ð¸Ñ.
â€¢ ÐŸÐ¾-Ð³Ð¾Ð»ÑÐ¼Ð° Ð±Ð°Ð·Ð° = Ð¿Ð¾Ð²ÐµÑ‡Ðµ Ð¿Ð°Ð¼ÐµÑ‚ Ð·Ð° Ñ€ÐµÐ»Ð¸Ð½Ð¸Ð·Ð¸Ñ€Ð°Ñ‰Ð¸ ÐºÐ»ÑŽÑ‡Ð¾Ð²Ðµ.
â€¢ ÐžÐ±Ð¸ÐºÐ½Ð¾Ð²ÐµÐ½Ð¾ 3-5 Ðµ Ð´Ð¾Ð±ÑŠÑ€ Ð¸Ð·Ð±Ð¾Ñ€.
â€¢ ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»Ð½Ð° ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚: 10."""

    N_INFO_SHORT = "ðŸ”¹ Ð¡Ñ‚ÐµÐ¿ÐµÐ½ Ð½Ð° Ð¿Ð¾Ð»Ð¸Ð½Ð¾Ð¼Ð° (n): ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»Ñ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð° Ð½Ð° Ð²ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð·Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð½Ðµ.\n   â€¢ Ð§Ð¸ÑÐ»Ð¾Ñ‚Ð¾ Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ðµ ÑÑ‚ÐµÐ¿ÐµÐ½ Ð½Ð° Ð´Ð²Ð¾Ð¹ÐºÐ°Ñ‚Ð° (4, 8, 16, 32, 64, 128).\n   â€¢ ÐŸÐ¾-Ð³Ð¾Ð»ÑÐ¼Ð° ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚ = Ð¿Ð¾Ð²ÐµÑ‡Ðµ ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚, Ð½Ð¾ Ð¿Ð¾-Ð±Ð°Ð²Ð½Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸.\n   â€¢ ÐŸÑ€ÐµÐ¿Ð¾Ñ€ÑŠÑ‡Ð¸Ñ‚ÐµÐ»Ð½Ð¾: 16-32 Ð·Ð° Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚Ð° Ð½Ð° ÑÑ…ÐµÐ¼Ð°Ñ‚Ð°, 64-128 Ð·Ð° Ð¿Ð¾-ÑÐ»Ð¾Ð¶Ð½Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸.\n   â€¢ ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»Ð½Ð° ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚: 128."

    LAMBDA_INFO_SHORT = "ðŸ”¹ ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚ÑŠÑ€ Ð·Ð° ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚ (Î»): ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»Ñ Ð½Ð¸Ð²Ð¾Ñ‚Ð¾ Ð½Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð³Ñ€Ð°Ñ„ÑÐºÐ° ÑƒÑÑ‚Ð¾Ð¹Ñ‡Ð¸Ð²Ð¾ÑÑ‚ (Ð² Ð±Ð¸Ñ‚Ð°) Ð½Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¾ÑÐ¸ÑÑ‚ÐµÐ¼Ð°Ñ‚Ð°, ÑÐ¿Ñ€ÑÐ¼Ð¾ Ð¸Ð·Ð²ÐµÑÑ‚Ð½Ð¸ Ð°Ñ‚Ð°ÐºÐ¸.\n   â€¢ Î» = 80 Ð±Ð¸Ñ‚Ð° - Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»Ð½Ð° ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚ Ð½Ð° ÑÑ…ÐµÐ¼Ð°Ñ‚Ð°.\n   â€¢ Î» = 128 Ð±Ð¸Ñ‚Ð° - ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð° ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚ (Ð¿Ñ€ÐµÐ¿Ð¾Ñ€ÑŠÑ‡Ð¸Ñ‚ÐµÐ»Ð½Ð¾).\n   â€¢ Î» = 192/256 Ð±Ð¸Ñ‚Ð° - Ð²Ð¸ÑÐ¾ÐºÐ° ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚ Ð½Ð° ÑÑ…ÐµÐ¼Ð°Ñ‚Ð°."

    T_INFO_SHORT = "ðŸ”¹ ÐœÐ¾Ð´ÑƒÐ» Ð½Ð° ÑÐ²Ð½Ð¾Ñ‚Ð¾ ÑÑŠÐ¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ (t): ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»Ñ Ð¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÑÑ‚Ð²Ð¾Ñ‚Ð¾ Ð½Ð° Ð½ÐµÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð½Ð¸Ñ‚Ðµ ÑÑŠÐ¾Ð±Ñ‰ÐµÐ½Ð¸Ñ.\n   â€¢ Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð½Ð° ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸Ñ‚Ðµ Ð²ÑŠÐ² Ð²ÐµÐºÑ‚Ð¾Ñ€Ð° Ð·Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð½Ðµ: Ð¾Ñ‚ 0 Ð´Ð¾ t-1.\n   â€¢ t Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ñ‡Ð¸ÑÐ»Ð¾ (2, 3, 5, 7, 11, 13...).\n   â€¢ ÐœÐ°Ð»ÐºÐ¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸ (2-31) ÑÐ° Ð´Ð¾Ð±Ñ€Ð¸ Ð·Ð° Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚Ð° Ð½Ð° ÑÑ…ÐµÐ¼Ð°Ñ‚Ð°.\n   â€¢ ÐŸÐ¾-Ð³Ð¾Ð»ÐµÐ¼Ð¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐ²Ð°Ñ‚ ÑÑŠÑ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÑ‚Ð¾ Ð½Ð° Ð¿Ð¾Ð²ÐµÑ‡Ðµ Ð´Ð°Ð½Ð½Ð¸."

    BASE_INFO_SHORT = "ðŸ”¹ Ð‘Ð°Ð·Ð° Ð·Ð° Ñ€ÐµÐ»Ð¸Ð½ÐµÐ°Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ: Ð˜Ð·Ð¿Ð¾Ð»Ð·Ð²Ð° ÑÐµ Ð·Ð° Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð½Ð° ÑƒÐ¼Ð½Ð¾Ð¶ÐµÐ½Ð¸ÐµÑ‚Ð¾.\n   â€¢ ÐŸÑ€ÐµÐ¿Ð¾Ñ€ÑŠÑ‡Ð¸Ñ‚ÐµÐ»Ð½Ð¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸: Ð¾Ñ‚ 3 Ð´Ð¾ 10.\n   â€¢ ÐŸÐ¾-Ð¼Ð°Ð»ÐºÐ° Ð±Ð°Ð·Ð° = Ð¿Ð¾-Ð±Ð°Ð²Ð½Ð° Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ñ Ð¿Ð¾ Ñ€ÐµÐ»Ð¸Ð½ÐµÐ°Ñ€Ð¸Ð·Ð¸Ñ€Ð°Ð½Ðµ.\n   â€¢ ÐŸÐ¾-Ð³Ð¾Ð»ÑÐ¼Ð° Ð±Ð°Ð·Ð° = Ð¿Ð¾Ð²ÐµÑ‡Ðµ Ð¿Ð°Ð¼ÐµÑ‚ Ð·Ð° Ñ€ÐµÐ»Ð¸Ð½ÐµÐ°Ñ€Ð¸Ð·Ð¸Ñ€Ð°Ñ‰Ð¸ ÐºÐ»ÑŽÑ‡Ð¾Ð²Ðµ.\n   â€¢ ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»Ð½Ð° ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚: 10."

    Q_INFO_SHORT = "ðŸ”¹ ÐœÐ¾Ð´ÑƒÐ» Ð½Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð½Ð¸Ñ‚Ðµ ÑÑŠÐ¾Ð±Ñ‰ÐµÐ½Ð¸Ñ (q): ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»Ñ ciphertext space - Ð¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÑÑ‚Ð²Ð¾Ñ‚Ð¾ Ð½Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð½Ð¸Ñ‚Ðµ ÑÑŠÐ¾Ð±Ñ‰ÐµÐ½Ð¸Ñ. \n   ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡Ð½Ð¾ ÑÐµ Ð¸Ð·Ñ‡Ð¸ÑÐ»ÑÐ²Ð° Ð²ÑŠÐ· Ð¾ÑÐ½Ð¾Ð²Ð° Ð½Ð° Î» Ð·Ð° Ð¾Ð¿Ñ‚Ð¸Ð¼Ð°Ð»Ð½Ð° ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚."


@dataclass
class HelpTexts:
    
    HELP_N: str = ParameterDescriptions.N_DESCRIPTION
    HELP_LAMBDA: str = ParameterDescriptions.LAMBDA_DESCRIPTION  
    HELP_T: str = ParameterDescriptions.T_DESCRIPTION
    HELP_BASE: str = ParameterDescriptions.BASE_DESCRIPTION


@dataclass
class WelcomeMessage:
    # Welcome message in the operations tab
    
    CONTENT: str = """ðŸ”¹ Ð”Ð¾Ð±Ñ€Ðµ Ð´Ð¾ÑˆÐ»Ð¸ Ð² BGVision!

ðŸ”§ ÐÐÐ§ÐÐ›Ðž:
1. ÐžÑ‚Ð¸Ð´ÐµÑ‚Ðµ Ð² Ñ‚Ð°Ð±Ð° â€žÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ" Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸Ñ‚Ðµ.
2. ÐÐ°Ñ‚Ð¸ÑÐ½ÐµÑ‚Ðµ â€žÐ“ÐµÐ½ÐµÑ€Ð¸Ñ€Ð°Ð¹ ÐºÐ»ÑŽÑ‡Ð¾Ð²Ðµ".
3. Ð˜Ð·Ð±ÐµÑ€ÐµÑ‚Ðµ Ñ‚Ð°Ð±Ð° â€žÐ¥Ð¾Ð¼Ð¾Ð¼Ð¾Ñ€Ñ„Ð½Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸".

ðŸ“š Ð¢ÐÐ‘ÐžÐ’Ð•:
â€¢ ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ - ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð½Ð° Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸ Ð¸ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð°Ð½Ðµ Ð½Ð° ÐºÐ»ÑŽÑ‡Ð¾Ð²Ðµ.
â€¢ Ð¥Ð¾Ð¼Ð¾Ð¼Ð¾Ñ€Ñ„Ð½Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ - Ð¡ÑŠÐ·Ð´Ð°Ð²Ð°Ð½Ðµ Ð½Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð³Ñ€Ð°Ð¼Ð¸ Ð¸ Ð¸Ð·Ð²ÑŠÑ€ÑˆÐ²Ð°Ð½Ðµ Ð½Ð° Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ñ Ñ‚ÑÑ….

ðŸ’¡ Ð¡ÐªÐ’Ð•Ð¢: Ð—Ð°Ð¿Ð¾Ñ‡Ð½ÐµÑ‚Ðµ Ñ Ð¿Ð¾-Ð¼Ð°Ð»ÐºÐ¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸ Ð·Ð° Ð¿Ð¾-Ð±ÑŠÑ€Ð·Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸!

ðŸ”— Ð¡ÐªÐ—Ð”ÐÐ’ÐÐÐ• ÐÐ ÐšÐ Ð˜ÐŸÐ¢ÐžÐ“Ð ÐÐœÐ˜:
â€¢ Ð’ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸ Ð·Ð° Ð²Ð°ÑˆÐ°Ñ‚Ð° ÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð³Ñ€Ð°Ð¼Ð°.
â€¢ ÐŸÑ€Ð°Ð²ÐµÑ‚Ðµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ ÐºÐ°Ñ‚Ð¾ A+Bâ†’R1, R1*Câ†’R2.
â€¢ Ð¡Ð»ÐµÐ´ÐµÑ‚Ðµ Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÑÑ‚Ð° Ð½Ð° Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸Ñ‚Ðµ.
â€¢ Ð”ÐµÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð¹Ñ‚Ðµ Ñ€ÐµÐ·ÑƒÐ»Ñ‚Ð°Ñ‚Ð¸Ñ‚Ðµ Ð·Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°.
"""


@dataclass
class ParameterInfo:
    
    @property
    def CONTENT(self) -> str:
        return f"""âš™ï¸ ÐŸÐÐ ÐÐœÐ•Ð¢Ð Ð˜ ÐÐ Ð¡Ð¥Ð•ÐœÐÐ¢Ð:
{ParameterDescriptions.N_INFO_SHORT}

{ParameterDescriptions.LAMBDA_INFO_SHORT}

{ParameterDescriptions.T_INFO_SHORT}

{ParameterDescriptions.BASE_INFO_SHORT}

{ParameterDescriptions.Q_INFO_SHORT}

âš™ï¸ Ð’Ð ÐªÐ—ÐšÐ Î» â†’ q: q â‰ˆ 2^(Î» + logâ‚‚(n)) Ð·Ð° Ð¿Ð¾ÑÑ‚Ð¸Ð³Ð°Ð½Ðµ Ð½Ð° Î»-Ð±Ð¸Ñ‚Ð¾Ð²Ð° ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚.

âš ï¸ ÐŸÑ€Ð¸ Ð¿Ñ€Ð¾Ð¼ÑÐ½Ð° Ð½Ð° Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸Ñ‚Ðµ Ðµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð°Ð½Ðµ Ð½Ð° ÐºÐ»ÑŽÑ‡Ð¾Ð²ÐµÑ‚Ðµ!

ðŸ’¡ Ð¡ÐªÐ’Ð•Ð¢Ð˜ Ð—Ð ÐžÐŸÐ¢Ð˜ÐœÐÐ›ÐÐ˜ ÐŸÐÐ ÐÐœÐ•Ð¢Ð Ð˜:
â€¢ Ð—Ð° Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð¸ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¸ Ñ†ÐµÐ»Ð¸: n=16, Î»=128, t=7.
â€¢ Ð—Ð° Ñ€ÐµÐ°Ð»Ð½Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ: n â‰¥ 64, Î» â‰¥ 128, t ÑÐ¿Ð¾Ñ€ÐµÐ´ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ñ‚Ð°.
â€¢ ÐŸÐ¾-Ð³Ð¾Ð»ÐµÐ¼Ð¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸ = Ð¿Ð¾Ð²ÐµÑ‡Ðµ ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚, Ð½Ð¾ Ð¿Ð¾-Ð±Ð°Ð²Ð½Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸.
â€¢ Ð—Ð°Ð¿Ð¾Ñ‡Ð½ÐµÑ‚Ðµ Ñ Ð¼Ð°Ð»ÐºÐ¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸ Ð¸ Ð³Ð¸ ÑƒÐ²ÐµÐ»Ð¸Ñ‡Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¸ Ð½ÑƒÐ¶Ð´Ð°.

ðŸŽ¯ ÐŸÐ ÐÐšÐ¢Ð˜Ð§Ð•Ð¡ÐšÐ˜ ÐŸÐ Ð•ÐŸÐžÐ ÐªÐšÐ˜:
â€¢ Ð˜Ð·Ð¿Ð¾Ð»Ð·Ð²Ð°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ñ‡Ð¸ÑÐ»Ð¾ Ð·Ð° t (2, 3, 5, 7, 11, 13...).
â€¢ Ð‘Ð°Ð·Ð° 3-5 Ðµ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð°Ð»Ð½Ð° Ð·Ð° Ð¿Ð¾Ð²ÐµÑ‡ÐµÑ‚Ð¾ ÑÐ»ÑƒÑ‡Ð°Ð¸.
â€¢ Î»=128 Ðµ Ð´Ð¾Ð±ÑŠÑ€ Ð±Ð°Ð»Ð°Ð½Ñ Ð¼ÐµÐ¶Ð´Ñƒ ÑÐ¸Ð³ÑƒÑ€Ð½Ð¾ÑÑ‚ Ð¸ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»Ð½Ð¾ÑÑ‚.
"""


class Config:
    # Main config class
    
    def __init__(self):
        self.bgv = BGVDefaults()
        self.app = AppSettings()
        self.ui_texts = UITexts()
        self.validation = ValidationRules()
        self.noise = NoiseManagement()
        self.help = HelpTexts()
        self.welcome = WelcomeMessage()
        self.param_info = ParameterInfo()

        self.descriptions = ParameterDescriptions()
    
    def get_instruction_text(self, n=None, t=None):
        if n is None:
            n = self.bgv.N
        if t is None:
            t = self.bgv.PLAINTEXT_MODULUS
            
        return f"Ð’ÑŠÐ²ÐµÐ´ÐµÑ‚Ðµ Ñ‚Ð¾Ñ‡Ð½Ð¾ {n} ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸ (0 Ð´Ð¾ {t - 1})"
    
    def validate_power_of_two(self, n):
        return n > 0 and (n & (n - 1)) == 0
    
    def get_suggested_coef_bits(self, lambda_security, n):
        import math
        log_n = math.log2(n)
        coef_bits = lambda_security + int(log_n) + self.validation.COEF_BITS_BUFFER
        return max(self.validation.COEF_BITS_MIN, 
                  min(coef_bits, self.validation.COEF_BITS_MAX))

config = Config()

# Export
__all__ = [
    'Config', 'BGVDefaults', 'AppSettings', 'UITexts', 'ValidationRules',
    'NoiseManagement', 'HelpTexts', 'WelcomeMessage', 'ParameterInfo', 
    'ParameterDescriptions', 'config'
]